<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Penalty Shootout (uses <BIRTHDAY class="JPG jpg"></BIRTHDAY> & SUI.MP3.mp3)</title>
<style>
  :root{ --green:#1f8b3a; --white:#fff; --accent:#ffd700 }
  body{ margin:0; min-height:100vh; display:flex; align-items:center; justify-content:center; background:linear-gradient(#0b6623,#1f8b3a); font-family:system-ui, Arial; color:var(--white) }
  .wrap{ width:760px; max-width:95%; text-align:center; }
  h1{ margin:14px 0; font-size:28px }
  .field{ position:relative; margin:0 auto; width:680px; height:360px; max-width:100%; background:linear-gradient(#2fb04f,#166b2a); border:5px solid rgba(255,255,255,0.15); border-radius:10px; overflow:hidden }
  /* goal post area */
  .goal { position:absolute; top:18px; left:50%; transform:translateX(-50%); width:420px; height:110px; border:4px solid rgba(255,255,255,0.55); border-radius:6px; background:rgba(255,255,255,0.03) }
  /* goalkeeper */
  #keeper { position:absolute; top:56px; left:50%; transform:translateX(-50%); width:72px; height:92px; background:#222; border-radius:10px; display:flex; align-items:center; justify-content:center; color:var(--accent); font-weight:900; font-size:22px; transition:left .45s ease, transform .3s ease; box-shadow:0 6px 18px rgba(0,0,0,.5) }
  /* ball */
  #ball { position:absolute; width:46px; height:46px; border-radius:50%; background:linear-gradient(#fff,#ddd); bottom:20px; left:calc(50% - 23px); border:3px solid #000; cursor:pointer; box-shadow:0 6px 20px rgba(0,0,0,.35); transition:bottom .9s linear, left .9s linear; display:flex; align-items:center; justify-content:center; font-weight:700;}
  /* ronaldo sprite placeholder */
  #ronaldo { position:absolute; width:120px; height:160px; bottom:6px; left:-160px; background-size:contain; background-repeat:no-repeat; transition:left 1.2s ease, opacity .7s ease; opacity:0 }
  /* big birthday image (hidden until goal) */
  #birthday { display:block; margin:18px auto 0; width:520px; max-width:92%; border-radius:12px; box-shadow:0 18px 42px rgba(0,0,0,.6); border:4px solid rgba(255,255,255,.12); display:none }
  .hud{ margin-top:12px; color:#fff; font-weight:700 }
  .debug{ margin-top:10px; font-size:13px; color:#fff8; text-align:left; background:rgba(0,0,0,0.15); padding:10px; border-radius:8px; max-width:680px; margin-left:auto; margin-right:auto; }
  button.retry{ margin-top:10px; padding:8px 12px; background:var(--accent); border:none; color:#000; font-weight:900; border-radius:8px; cursor:pointer }
  @media (max-width:560px){ #ronaldo{ width:84px; height:120px } }
</style>
</head>
<body>
  <div class="wrap">
    <h1>⚽ Penalty Shootout — Click the ball to shoot</h1>

    <div class="field" id="field" aria-hidden="false">
      <div class="goal" aria-hidden="true"></div>

      <div id="keeper" title="Goalkeeper">10</div>

      <div id="ball" title="Click to shoot">⚽</div>

      <!-- ronaldo image is optional; if you want to use custom sprite replace URL below -->
      <div id="ronaldo" style="background-image:url('https://i.ibb.co/8Km9t8s/ronaldo.png');">7</div>
    </div>

    <div class="hud" id="message">Click the ball → beat the keeper and celebrate!</div>

    <!-- birthday image (will pop up on goal) -->
    <img id="birthday" src="BIRTHDAY.JPG.jpg" alt="Happy Birthday">

    <div class="debug" id="debug">
      <div><strong>Debug status</strong></div>
      <div id="img-status">Image: checking…</div>
      <div id="audio-status">Audio: checking…</div>
      <div id="console-log" style="margin-top:6px;color:#fff8"></div>
      <button class="retry" id="retry">Re-check files</button>
    </div>
  </div>

  <!-- audio (your file name is uppercase per your folder) -->
  <audio id="sui" src="SUI.MP3.mp3" preload="auto"></audio>

<script>
/* ========== CONFIG ========== */
const BIRTHDAY_FILENAME = "BIRTHDAY.JPG.jpg";
const SUI_FILENAME = "SUI.MP3.mp3";

/* Elements */
const ball = document.getElementById('ball');
const keeper = document.getElementById('keeper');
const ronaldo = document.getElementById('ronaldo');
const birthday = document.getElementById('birthday');
const message = document.getElementById('message');
const debugImg = document.getElementById('img-status');
const debugAudio = document.getElementById('audio-status');
const consoleLog = document.getElementById('console-log');
const retryBtn = document.getElementById('retry');
const sui = document.getElementById('sui');

let audioUnlocked = false;
let isAnimating = false;

/* helper log */
function logDebug(txt){
  console.log(txt);
  consoleLog.innerText += txt + "\\n";
}

/* Check files exist (image load test and audio canplay) */
function checkFiles() {
  // image test
  const testImg = new Image();
  testImg.onload = () => {
    debugImg.innerText = `Image OK: ${BIRTHDAY_FILENAME} (width ${testImg.naturalWidth}px)`;
    birthday.style.display = 'none'; // keep hidden initially
    logDebug('Image loaded successfully.');
  };
  testImg.onerror = () => {
    debugImg.innerText = `Image NOT FOUND: ${BIRTHDAY_FILENAME} — check name & case`;
    logDebug('Image load failed. Make sure the file is named exactly: ' + BIRTHDAY_FILENAME);
  };
  testImg.src = BIRTHDAY_FILENAME + '?_ts=' + Date.now();

  // audio test - try to load and check canPlayType
  let canPlay = sui.canPlayType && sui.canPlayType('audio/mpeg');
  if (canPlay === "") canPlay = "maybe";
  debugAudio.innerText = `Audio element ready, canPlayType('audio/mpeg') => ${canPlay}`;
  logDebug('Audio element created. Note: some browsers block autoplay until user interacts.');

  // also listen for error
  sui.onerror = () => {
    debugAudio.innerText = `Audio NOT FOUND or load error: ${SUI_FILENAME} — check name & case`;
    logDebug('Audio load error. Make sure the file is named exactly: ' + SUI_FILENAME);
  };
}

/* Unlock audio on first user gesture (improves autoplay reliability) */
function unlockAudio() {
  if (audioUnlocked) return;
  try {
    const AudioContext = window.AudioContext || window.webkitAudioContext;
    if (AudioContext) {
      window._aCtx = new AudioContext();
